<script>
  (function () {
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const setting = localStorage.getItem("hexo-color-scheme") || "auto";
    if (setting === "dark" || (prefersDark && setting !== "light"))
      document.documentElement.classList.toggle("dark", true);
  })();

  window.onload = function () {
    // init iconify icon
    const isDark = document.documentElement.classList.contains("dark");

    if (isDark) {
      document
        .getElementById("toggle-dark")
        .setAttribute("icon", "ri:moon-line");
    } else {
      document
        .getElementById("toggle-dark")
        .setAttribute("icon", "ri:sun-line");
    }

    const toggleDark = () => {
      const darkMode = document.documentElement.classList.toggle("dark");
      localStorage.setItem("hexo-color-scheme", darkMode ? "dark" : "light");
      document
        .getElementById("toggle-dark")
        .setAttribute("icon", darkMode ? "ri:moon-line" : "ri:sun-line");
    };

    document
      .getElementById("toggle-dark")
      .addEventListener("click", toggleDark);
  };
</script>
